# 字母圈社交应用 

本项目是面向字母圈的一款社交应用。对字母圈不了解的朋友，可以把本app当作一个小众的兴趣社交应用看待。

## Slogan和卖点以及产品的设计初衷
















## 功能概览

### 充值
+ 卡密充值

### 页面布局调整
+ 用户可自定义的首页板块的内容

::: tip
管理后台调整布局，用户调节内容
:::


### 基本社交功能
+ 动态
+ 日志
+ 私信
+ 私密圈

::: tip
动态包含图文，互动，链接，日志可为外链，私信分好友私信和付费私信。
:::

### 媒体资讯
+ 兴趣推荐
+ 问答社区（寻求片名，图文）

::: tip
内容去重，内容识别，内容分析，用户画像构成，浏览状态记录。
:::

### 聊天室
+ 语音，视频聊天室

::: tip
rtc互动，权限功能
:::

### 商城
+ 周边商品
+ 直播竞拍
+ 预定竞拍

::: tip
在群聊中竞拍
:::

### 特殊用户画像分析
+ 用户取向喜好判断算法
















## 设计

### 页面结构

+ 方案一：侧边栏（我的，设置）+ Tabbar（首页，发现，消息）
+ 方案二：Tabbar（首页，发现，消息，我的）

侧边栏好些还是Tabbar好些。。持续纠结中。。回头再做决定吧

::: tip
**侧边栏**：可以把商城，聊天室，资讯单独链接到一个基于Tabbar分类的视图控制器上，可以做更多内容，方便后续版本迭代

**无侧边栏**：普通用户习惯，容易接受
:::

**决定采用方案一**
+ **侧边栏**
    + 个人资料
        + 编辑页面
    + 收藏夹
    + 消息
        + 通知消息
        + 私信
    + 首页 
        + 搜索
        + 首页
        + 发现
        + 动态
    + 商城
        + 商城
        + 拍卖行
        + 购物车
    + 聊天室
        + 热门推荐
        + 发现
        + 聊天室设置
    + 社区
        + 问答社区
        + 日志社区
    + 设置
        + 账号设置
        + 推送设置
    + 账号管理

+ **复用页面**
    + 登陆
    + 购物车
    + 个人资料
    + 私密圈
    + 私信
    + 商品详情
    + 聊天室
    + 问答详情
    + 日志详情
    + 浏览器
    + 收藏夹

+ **功能模组**
    + 分享
    + 点赞评论

### 控件

**引导指示器**

用于新手引导的指示器控件

**按钮引导指示器**

可以高亮发光的控件

### 登陆注册

较为普通的新用户注册流程，加入邀请码机制，类似于ClubHouse的邀请方可加入的形式。



### 首页

首页以推荐和引导为主要目的，包含以下板块
+ banner
+ 用户推荐
+ 聊天室推荐
+ 资讯推荐
+ 商品推荐

推荐分为官方推荐，和自动匹配

需要用户可以调整推荐参数，增加配置器页面

::: tip
**匹配逻辑**: 根据每个用户的特征参数进行搜索筛选，特征参数会根据用户习惯进行变更
:::

**UI设计图版本1.0：**

### 新用户引导
+ 基本信息（性别，取向，昵称，头像）
+ 偏好选择（偏好词库选取，特征用户选取）

::: tip
**特征用户**是如何被筛选出来的。假如a群体关注b的同时也关注了c，b和c之间粉丝数最高的将会成为特征用户，若a群体和b群体分别关注了c和d，那c和d就同时为特征用户。

TODO: 需要算法
:::

### 添加好友
+ 普通好友添加逻辑，双向申请，a用户申请添加b用户，b用户通过，或b用户申请添加a用户为好友即可建立好友关系
+ 付费添加

### 聊天

私信的聊天页面，单独设计了一套统一标准的聊天页面，未来的应用中也会用这一套IM界面，这个APP的聊天页面的功能将是最全面的。

#### 语音通话

因为有计时收费的需求，所以语音通话也是存在计时收费模式的。

#### 视频通话

和语音通话一样，同样具有计时收费的模式。

#### 发文字

发文字似乎没有必要无中生有，沿用市面上基本的文本发送框即可。但文本输入框的高度，编者偏向于能够动态的调整高度，类似于iMessage。

#### 发语音

参考了Instagram的语音输入流程，按住语音按钮即可开始音频录制，如果用户点击语音按钮弹出引导提示

![1615094841384.png](http://blog-img.molifouru.cn/1615094841384.png)

按住语音按钮后开始音频录制，向左滑动取消录制，松开即可发送。根据用户输入的音量电平值改变渐变波纹的大小（一个编者觉得还不错的小效果）

![1615094902970.png](http://blog-img.molifouru.cn/1615094902970.png)

取消发送的动画过度效果和最终形态

![1615099244233.png](http://blog-img.molifouru.cn/1615099244233.png)

**语音气泡的三种状态：**

发送中

![1615095289191.png](http://blog-img.molifouru.cn/1615095289191.png)

普通

![1615095138959.png](http://blog-img.molifouru.cn/1615095138959.png)

播放中

![1615095153809.png](http://blog-img.molifouru.cn/1615095153809.png)

#### 文字

#### 图片/拍照

接入[茉栗相机SDK](../)

#### 基础功能：
+ 发地理位置

+ 送礼物

+ 发送账单

#### 互动游戏：

+ 真心话大冒险




### 主奴关系功能

![1614422114286.png](http://blog-img.molifouru.cn/1614422114286.png)

根据[女Dom啵叽](http://blog-img.molifouru.cn/1614421974200.png)的建议，添加主奴关系功能

+ 主可以查询奴的行为记录



















## 开发
开发过程仅对核心功能的实现方式进行记录。

### 特征参数
每个用户都具备一个特征参数，特征参数将会被转译为query参数进行数据库查询，特征参数描述了一个用户的兴趣喜好。为了能够使匹配更加精准，则需要一个默认的基准线数据。

``` json
{
    /* 角色 fixed */
    'role': [
        'S': 1.0,
        'Dom': 1.0,
        'M': 0.0,
        'Sub': 1.0,
        'Switch': 0.0,
    ],
    /* 偏好 mutable */
    'into': [
        'hair': 0.8,
        'stocking': 0.6,
        'heels': 0,
    ]
}
```
**特征用户算法** 待定

**偏好词和偏好词库** 预设词+用户数据流（帖子，动态，聊天，评论）中提取出来的高频词,筛选功能中可以进行筛选

::: warning

**BUG:** 用户a对短发女生喜好较高。用户b对短发女生对喜好也较高，但用户a和用户b对于短发的定义截然不同，系统对于女生用户c的定义为短发，此时用户c对于用户a来说为合适，对于用户b来说头发还不够短。

**Solution:** currently unavaliable
:::

::: warning

**QUESTION:** 如何分析用户特征？ 

**Solution:** currently unavaliable
:::

**无法考量的参数** 仅能通过手动填写来确认，无法考量的参数如下

+ 角色(S,M,Dom,Sub,Switch)
+ 性别(Male,Female,MF,FM)

**取向问题** 目前没有找到合适的方式进行推理，决定采用手动填写的方式

::: warning
**BUG:** 对于不能够确定角色导致错误填写的用户该怎么解决?

**Solution:** 根据行为修改基准线参数
:::

### 角色-行为对照表
此应用需要对用户性格进行推断。我想到的方案是，使用行为对照表进行参考。
+ S

+ M

+ Dom

+ Sub

+ Switch





## 测试

**用户反馈高频词:**
+ 页面不美观
+ 消息找不到

**逻辑问题:**

::: danger

:::





## 上线
### WEB+Server
yyyy-mm-dd开始运行

### iOS v1.0
于yyyy-mm-dd上线

### Android v1.0
于yyyy-mm-dd上线









## 后续

+  yyyy-mm-dd日达到100用户 
+  yyyy-mm-dd日达到1000用户
+  yyyy-mm-dd日达到10000用户
+  yyyy-mm-dd日将此APP售出，价格：